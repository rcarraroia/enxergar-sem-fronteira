#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "üìù Validando mensagem de commit..."

# Ler a mensagem de commit
commit_msg=$(cat "$1")

# Verificar se a mensagem segue o padr√£o conventional commits
if ! echo "$commit_msg" | grep -qE "^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)(\(.+\))?: .{1,50}"; then
    echo "‚ùå Erro: Mensagem de commit deve seguir o padr√£o Conventional Commits"
    echo ""
    echo "Formato: tipo(escopo): descri√ß√£o"
    echo ""
    echo "Tipos v√°lidos:"
    echo "  feat:     Nova funcionalidade"
    echo "  fix:      Corre√ß√£o de bug"
    echo "  docs:     Documenta√ß√£o"
    echo "  style:    Formata√ß√£o, ponto e v√≠rgula, etc"
    echo "  refactor: Refatora√ß√£o de c√≥digo"
    echo "  test:     Adi√ß√£o ou corre√ß√£o de testes"
    echo "  chore:    Tarefas de manuten√ß√£o"
    echo "  perf:     Melhoria de performance"
    echo "  ci:       Integra√ß√£o cont√≠nua"
    echo "  build:    Sistema de build"
    echo "  revert:   Reverter commit anterior"
    echo ""
    echo "Exemplos:"
    echo "  feat: adicionar sistema de login"
    echo "  fix(auth): corrigir valida√ß√£o de senha"
    echo "  docs: atualizar README"
    echo ""
    exit 1
fi

echo "‚úÖ Mensagem de commit v√°lida!"
